{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danie\\\\Desktop\\\\project\\\\FE\\\\src\\\\components\\\\Meals\\\\AvailableMeals.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Card from '../UI/Card';\nimport MealItem from './MealItem/MealItem';\nimport classes from './AvailableMeals.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AvailableMeals = () => {\n  _s();\n\n  const [meals, setMeals] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [category, setCategory] = useState([]);\n  const [isLoadingCategory, setIsLoadingCategory] = useState(true);\n  const [httpError, setHttpError] = useState();\n  const [selectedCategory, setSelectedCategory] = useState(0);\n\n  let handleCategoryChange = e => {\n    // console.log(e.target.value);\n    setSelectedCategory(e.target.value);\n  };\n\n  useEffect(() => {\n    const fetchCategory = async () => {\n      const response = await fetch('http://localhost:5555/Category');\n\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n\n      const responseData = await response.json();\n      const loadedCategory = [];\n\n      for (const key in responseData) {\n        loadedCategory.push({\n          id: responseData[key].categoryId,\n          name: responseData[key].name,\n          description: responseData[key].description\n        });\n      } //console.log(loadedMeals);\n\n\n      setCategory(loadedCategory);\n      setIsLoadingCategory(false);\n    };\n\n    fetchCategory().catch(error => {\n      setIsLoadingCategory(false);\n      setHttpError(error.message);\n    });\n\n    const fetchMeals = async () => {\n      const targetUrl = selectedCategory === 0 ? 'http://localhost:5555/Food' : 'http://localhost:5555/Food/1' + selectedCategory;\n      console.log(targetUrl);\n      const response = await fetch( //'https://react-http-e0a76-default-rtdb.firebaseio.com/meals.json'       \n      targetUrl);\n\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n\n      const responseData = await response.json();\n      const loadedMeals = [];\n\n      for (const key in responseData) {\n        loadedMeals.push({\n          id: key,\n          name: responseData[key].name,\n          // description: responseData[key].description,\n          price: responseData[key].sales_price\n        });\n      } //console.log(loadedMeals);\n\n\n      setMeals(loadedMeals);\n      setIsLoading(false);\n    };\n\n    fetchMeals().catch(error => {\n      setIsLoading(false);\n      setHttpError(error.message);\n    });\n  }, [selectedCategory]);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes.MealsLoading,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (httpError) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes.MealsError,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: httpError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  }\n\n  const mealsList = meals.map(meal => /*#__PURE__*/_jsxDEV(MealItem, {\n    id: meal.id,\n    name: meal.name // description={meal.description}\n    ,\n    price: meal.price\n  }, meal.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.meals,\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: handleCategoryChange,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Select a category\",\n        children: \" -- Select a category -- \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), category.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: c.id,\n        children: c.name\n      }, c.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 30\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: mealsList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AvailableMeals, \"el+KpQA2nupZD3tgym8VFQbCsrM=\");\n\n_c = AvailableMeals;\nexport default AvailableMeals;\n\nvar _c;\n\n$RefreshReg$(_c, \"AvailableMeals\");","map":{"version":3,"names":["useEffect","useState","Card","MealItem","classes","AvailableMeals","meals","setMeals","isLoading","setIsLoading","category","setCategory","isLoadingCategory","setIsLoadingCategory","httpError","setHttpError","selectedCategory","setSelectedCategory","handleCategoryChange","e","target","value","fetchCategory","response","fetch","ok","Error","responseData","json","loadedCategory","key","push","id","categoryId","name","description","catch","error","message","fetchMeals","targetUrl","console","log","loadedMeals","price","sales_price","MealsLoading","MealsError","mealsList","map","meal","c"],"sources":["C:/Users/danie/Desktop/project/FE/src/components/Meals/AvailableMeals.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\nimport Card from '../UI/Card';\r\nimport MealItem from './MealItem/MealItem';\r\nimport classes from './AvailableMeals.module.css';\r\n\r\nconst AvailableMeals = () => {\r\n  const [meals, setMeals] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [category, setCategory] = useState([]);\r\n  const [isLoadingCategory, setIsLoadingCategory] = useState(true);\r\n  const [httpError, setHttpError] = useState();\r\n  const [selectedCategory, setSelectedCategory] = useState(0);\r\n\r\n  let handleCategoryChange = (e) => {\r\n    // console.log(e.target.value);\r\n    setSelectedCategory(e.target.value);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchCategory = async () => {\r\n      const response = await fetch(\r\n        'http://localhost:5555/Category'\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Something went wrong!');\r\n      }\r\n\r\n      const responseData = await response.json();\r\n\r\n      const loadedCategory = [];\r\n\r\n      for (const key in responseData) {\r\n        loadedCategory.push({\r\n          id: responseData[key].categoryId,\r\n          name: responseData[key].name,\r\n          description: responseData[key].description,\r\n        });\r\n      }\r\n\r\n      //console.log(loadedMeals);\r\n      setCategory(loadedCategory);\r\n      setIsLoadingCategory(false);\r\n    };\r\n\r\n    fetchCategory().catch((error) => {\r\n      setIsLoadingCategory(false);\r\n      setHttpError(error.message);\r\n    });\r\n\r\n    const fetchMeals = async () => {\r\n      const targetUrl = selectedCategory === 0 ? 'http://localhost:5555/Food' : 'http://localhost:5555/Food/1' + selectedCategory;\r\n      console.log(targetUrl)\r\n      const response = await fetch(\r\n        //'https://react-http-e0a76-default-rtdb.firebaseio.com/meals.json'       \r\n        targetUrl\r\n      );\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Something went wrong!');\r\n      }\r\n\r\n      const responseData = await response.json();\r\n\r\n      const loadedMeals = [];\r\n\r\n      for (const key in responseData) {\r\n        loadedMeals.push({\r\n          id: key,\r\n          name: responseData[key].name,\r\n          // description: responseData[key].description,\r\n          price: responseData[key].sales_price,\r\n        });\r\n      }\r\n\r\n      //console.log(loadedMeals);\r\n      setMeals(loadedMeals);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchMeals().catch((error) => {\r\n      setIsLoading(false);\r\n      setHttpError(error.message);\r\n    });\r\n  }, [selectedCategory]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <section className={classes.MealsLoading}>\r\n        <p>Loading...</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (httpError) {\r\n    return (\r\n      <section className={classes.MealsError}>\r\n        <p>{httpError}</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  const mealsList = meals.map((meal) => (\r\n    <MealItem\r\n      key={meal.id}\r\n      id={meal.id}\r\n      name={meal.name}\r\n      // description={meal.description}\r\n      price={meal.price}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <section className={classes.meals}>\r\n      {/* {fruit} */}\r\n      <br />\r\n      <select onChange={handleCategoryChange}> \r\n        <option value=\"Select a category\"> -- Select a category -- </option>\r\n        {category.map((c) => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n      </select>\r\n      <Card>\r\n        <ul>{mealsList}</ul>\r\n      </Card>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default AvailableMeals;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}